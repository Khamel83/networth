{% extends "base.html" %}
{% block title %}Report Score - NET WORTH{% endblock %}
{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <h2><i class="fas fa-trophy"></i> Report Match Score</h2>
    <form method="POST" action="/report-score">
        <div class="form-group">
            <label for="opponent_id">Opponent *</label>
            <select class="form-control" id="opponent_id" name="opponent_id" required>
                <option value="">Select opponent...</option>
                {% for p in players %}
                <option value="{{ p.id }}">{{ p.name }} ({{ p.skill_level }})</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="match_date">Match Date *</label>
            <input type="date" class="form-control" id="match_date" name="match_date" value="{{ today }}" max="{{ today }}" required>
        </div>

        <h3 style="margin-top: 2rem;">Set Scores</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label>Your Set 1</label>
                <input type="number" class="form-control" name="player_set1" min="0" max="7" required>
            </div>
            <div class="form-group">
                <label>Opponent Set 1</label>
                <input type="number" class="form-control" name="opponent_set1" min="0" max="7" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label>Your Set 2</label>
                <input type="number" class="form-control" name="player_set2" min="0" max="7" required>
            </div>
            <div class="form-group">
                <label>Opponent Set 2</label>
                <input type="number" class="form-control" name="opponent_set2" min="0" max="7" required>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label>Your Set 3 (if played)</label>
                <input type="number" class="form-control" name="player_set3" min="0" max="7">
            </div>
            <div class="form-group">
                <label>Opponent Set 3 (if played)</label>
                <input type="number" class="form-control" name="opponent_set3" min="0" max="7">
            </div>
        </div>

        <div class="form-group">
            <label for="notes">Notes (optional)</label>
            <textarea class="form-control" id="notes" name="notes" rows="3"></textarea>
        </div>

        <div style="display: flex; gap: 1rem;">
            <a href="/dashboard" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary">Submit Score</button>
        </div>
    </form>
</div>

<script>
document.querySelector('form').addEventListener('submit', function(e) {
    var date = new Date(document.getElementById('match_date').value);
    if (!date || date > new Date()) {
        e.preventDefault();
        alert('Please enter a valid match date (not in the future).');
    }
});
</script>
{% endblock %}
